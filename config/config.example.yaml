jira:
  base_url: "https://jira.synnex.com"
  # Prefer environment variable auth:
  #   export RACKBRAIN_JIRA_PAT="..."
  # If you really need to put a token here, keep it out of git.
  pat: ""
  pat_env: "RACKBRAIN_JIRA_PAT"

rules:
  files:
    - "config/rules/generic_rules.yaml"
    - "config/rules/workflows_telnet_console.yaml"
    - "config/rules/workflows_ilom_console.yaml"
    - "config/rules/dimm_rules.yaml"
    - "config/rules/pci_rules.yaml"
    - "config/rules/workflows_psu_ac_loss.yaml"
    - "config/rules/workflows_bios_deferred_update.yaml"
    - "config/rules/workflows_snbench_200g_jumper.yaml"
    - "config/rules/untested_rules.yaml"
    - "config/rules/temporary_rules.yaml"
    - "config/rules/approval_rules.yaml"

processing:
  # Configuration for ticket processing workflow
  required_combined_text_contains: "This ticket generated by EVE BOT"
  assign_to: "elias.bakhtani@hyvesolutions.com"
  reassign_to: "johnalbert.sison@hyvesolutions.com"
  transition_to: "In Progress"
  allowed_statuses:
    - "Open"
    - "In Progress"
  # Optional: override timer DB path; relative paths are resolved under RACKBRAIN_HOME.
  # timer_db_path: "state/rackbrain_state.sqlite"

polling:
  enabled: true
  poll_interval_seconds: 10
  lookback_hours: 2
  project_key: "MFGS"
  allowed_statuses:
    - "Open"
    - "In Progress"
  max_workers: 4
  max_results: 10
  jql: |
    project IN (MFGS)
    AND Location = Fremont
    AND (created >= -1h
      OR (
        created >= -2h AND
        updated>= -1h
      )
    )
    AND (
      status = Open
      OR (status = "In Progress" AND assignee = currentUser())
    )
    AND summary !~ "WOODY: HOP26EN*"
    AND summary !~ "Hopper26SFE*"
    AND summary !~ "WOODY: HEATWAVE*"
    AND summary !~ "NPI*"
    AND summary !~ "WOODY: HOP56*"
    ORDER BY created DESC, summary DESC, cf[15143] DESC, updated DESC

  extra_queries:
    - name: approval_ack_old_tickets
      only_rule_ids: ["approval_request_ack"]
      max_results: 200
      jql: |
        project IN (MFGS)
        AND Location = Fremont
        AND updated >= -1h
        AND status = "In Progress"
        AND assignee = currentUser()
        ORDER BY updated DESC

logging:
  enabled: true
  # Relative paths are resolved under RACKBRAIN_HOME (or config base dir).
  log_dir: "logs"
  log_file: "rackbrain_processed.log"
  log_format: "json"
  rotate_daily: true

